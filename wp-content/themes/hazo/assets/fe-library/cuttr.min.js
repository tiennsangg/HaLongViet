/*!
 * Cuttr 1.0.2
 * https://github.com/d-e-v-s-k/cuttr-js
 *
 * @license GPLv3 for open source use only
 * or Cuttr Commercial License for commercial use
 * https://cuttr.kulahs.de/pricing/
 *
 * Copyright (C) 2020 https://cuttr.kulahs.de/ - A project by DEVSK
 **/
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Cuttr=e()}(this,function(){return function t(e,n){"use strict";var g=Object.create(t.prototype);g.options={elementsToTruncate:e?document.querySelectorAll(e):document.querySelectorAll(".cuttr"),originalContent:[],contentVisibilityState:[],contentTruncationState:[],truncate:"characters",length:100,ending:"...",loadedClass:"cuttr--loaded",readMore:!1,readMoreText:"read more",readLessText:"read less",readMoreBtnPosition:"after",readMoreBtnTag:"button",readMoreBtnSelectorClass:"cuttr-readmore",readMoreBtnAdditionalClasses:"",dataIndex:"data-cuttr-index"},n&&Object.keys(n).forEach(function(t){g.options[t]=n[t]});function l(t,e,n,o){var a=t.dataset.cuttrIndex;switch(null==n&&(n=100),null==o&&(o="..."),t.dataset.cuttrMethod?t.dataset.cuttrMethod:g.options.truncate){case"characters":return e.length>n?(g.options.contentTruncationState[a]=!0,g.options.contentVisibilityState[a]=!1,e.substring(0,n-o.length)+o+" "):e;case"words":var i=e.split(/ (?=[^>]*(?:<|$))/);return i.length>n?(g.options.contentTruncationState[a]=!0,g.options.contentVisibilityState[a]=!1,i.splice(0,n).join(" ")+" "+o+" "):e;case"sentences":var r=e.match(/[^\.!\?]+[\.!\?]+/g);return r.length>n?(g.options.contentTruncationState[a]=!0,g.options.contentVisibilityState[a]=!1,r.splice(0,n).join(" ")+" "+o+" "):e;default:return e.length>n?(g.options.contentTruncationState[a]=!0,g.options.contentVisibilityState[a]=!1,e.substring(0,n-o.length)+o):e}}function u(t,e){var n,o=t,a=o.dataset.cuttrIndex,i=o.dataset.cuttrReadmore?o.dataset.cuttrReadmore:g.options.readMoreText,r=o.dataset.cuttrReadmore?o.dataset.cuttrReadless:g.options.readLessText,s=o.dataset.cuttrReadmorePosition?o.dataset.cuttrReadmorePosition:g.options.readMoreBtnPosition,d=o.dataset.cuttrReadmoreTag?o.dataset.cuttrReadmoreTag:g.options.readMoreBtnTag,c="."+g.options.readMoreBtnSelectorClass,l=o.dataset.cuttrReadmoreAdditionalClasses?o.dataset.cuttrReadmoreAdditionalClasses:g.options.readMoreBtnAdditionalClasses,u=g.options.contentVisibilityState[a]?r:i,p=" <"+d+' aria-expanded="'+(g.options.contentVisibilityState[a]?"true":"false")+'" class="'+g.options.readMoreBtnSelectorClass+" "+l+'">'+u.replace(/<[^>]*>/g,"")+"</"+d+">";if("after"==s&&o.nextElementSibling?n=o.nextElementSibling.matches(c):"inside"==s&&(n=o.querySelector(c)),!n){switch(s){case"after":o.insertAdjacentHTML("afterend",p);break;case"inside":o.insertAdjacentHTML("beforeend",p);break;default:console.log("no matching read-more button position defined")}e||("after"==s?o.nextElementSibling.addEventListener("click",function(t){t.target&&t.target.classList.contains(g.options.readMoreBtnSelectorClass)&&m(t,s)}):"inside"==s&&o.addEventListener("click",function(t){t.target&&t.target.classList.contains(g.options.readMoreBtnSelectorClass)&&m(t,s)}))}}function m(t,e){var n,o="after"==e?t.target.previousElementSibling:t.target.parentNode,a=o.innerHTML,i=o.dataset.cuttrIndex,r=o.dataset.cuttrReadmore?o.dataset.cuttrReadmore:g.options.readMoreText,s=o.dataset.cuttrReadmore?o.dataset.cuttrReadless:g.options.readLessText,d=o.dataset.cuttrLength?o.dataset.cuttrLength:g.options.length,c=o.dataset.cuttrEnding?o.dataset.cuttrEnding:g.options.ending;g.options.contentVisibilityState[i]?(n=l(o,a.trim(),d,c),o.innerHTML=n,g.options.contentVisibilityState[i]=!1,"inside"==e&&g.options.readMore&&u(o,!0),t.target.innerHTML=r.replace(/<[^>]*>/g,"")):(o.innerHTML=g.options.originalContent[i],g.options.contentVisibilityState[i]=!0,"inside"==e&&g.options.readMore&&u(o,!0),t.target.innerHTML=s.replace(/<[^>]*>/g,""))}return function(){(function(){for(var t=0;t<g.options.elementsToTruncate.length;t++){var e=g.options.elementsToTruncate[t],n=e.innerHTML,o=e.dataset.cuttrLength?e.dataset.cuttrLength:g.options.length,a=e.dataset.cuttrEnding?e.dataset.cuttrEnding:g.options.ending,i=void 0;e.setAttribute(g.options.dataIndex,t),g.options.originalContent.push(n),i=l(e,n.trim(),o,a),e.innerHTML=i,g.options.contentTruncationState[t]&&(g.options.readMore&&u(e),e.classList+=" "+g.options.loadedClass)}}).call(this)}(),g}});
//# sourceMappingURL=cuttr.min.js.map
